"use strict";(self.webpackChunkmy_notes=self.webpackChunkmy_notes||[]).push([[981],{8613:(e,a,r)=>{r.r(a),r.d(a,{default:()=>d});var l=r(6540);const t={container:"container_KUKa",header:"header_AQSU",title:"title_ZfZK",subtitle:"subtitle_lMwb",topBar:"topBar_siol",filters:"filters_vPCS",select:"select_oGfM",clearBtn:"clearBtn_wkFZ",inlineForm:"inlineForm_hZ7K",input:"input_Wj5n",smallSelect:"smallSelect_Xiof",primaryBtn:"primaryBtn_eSo3",grid:"grid_uMZU",card:"card_EhLz",checked:"checked_TgHq",cardImageWrap:"cardImageWrap_sya8",cardImage:"cardImage_zHom",overlay:"overlay_JyVE",typeBadge:"typeBadge_tL_4",cardBody:"cardBody_gbju",cardHead:"cardHead_ZkyB",cardTitle:"cardTitle_BBXi",categoryChip:"categoryChip_Sts1",cardDesc:"cardDesc_DokA",cardFooter:"cardFooter_AsIa",linkBtn:"linkBtn_QuEb",copyBtn:"copyBtn_lINE",checkBtn:"checkBtn_w6Rt",checkBtnActive:"checkBtnActive_p85M",deleteBtn:"deleteBtn_T24B",empty:"empty_N0Pt",summaryBtn:"summaryBtn_V4tU",disabled:"disabled_WrW3",purplePulse:"purplePulse_KNBf",summaryAddBtn:"summaryAddBtn_D8Wa"};const s=(0,r(991).UU)("https://lkpldyzasmjxrmgpnbzj.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxrcGxkeXphc21qeHJtZ3BuYnpqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUxNTE3NjQsImV4cCI6MjA3MDcyNzc2NH0.56C2WbqDxK8umv1JX2gME2qvuN_VF_3KhDcheoeijyk");r(4586);var n=r(4848);const i=[{value:"book",label:"\ud83d\udcd6 Book"},{value:"audio",label:"\ud83c\udfa7 Audio"},{value:"course",label:"\ud83c\udf93 Course"},{value:"article",label:"\ud83d\udcdd Article"},{value:"tool",label:"\ud83d\udee0 Tool"}],c=[{value:"backend",label:"Backend / Systems",icon:"\ud83d\udda5"},{value:"frontend",label:"Frontend / UI",icon:"\ud83d\udd8c"},{value:"devops",label:"DevOps / Cloud",icon:"\u2601\ufe0f"},{value:"general",label:"General / Learning",icon:"\ud83d\udcda"},{value:"misc",label:"Misc / Reference",icon:"\ud83d\udccc"}],o="https://placehold.co/600x400";function d(){const[e,a]=(0,l.useState)([]),[r,d]=(0,l.useState)({name:"",url:"",type:"book",category:"backend",imageUrl:"",description:"",summaryLink:""}),[m,u]=(0,l.useState)({type:"",category:"",hasSummary:""}),[y,h]=(0,l.useState)(!1),[p,k]=(0,l.useState)({});async function g(){h(!0);try{let e=s.from("bookmarks").select("*").order("id",{ascending:!1});m.type&&(e=e.eq("type",m.type)),m.category&&(e=e.eq("category",m.category)),"with"===m.hasSummary?e=e.not("summary_link","is",null):"without"===m.hasSummary&&(e=e.is("summary_link",null));const{data:r,error:l}=await e;l?(console.error("fetchBookmarks error:",l),a([])):a((r||[]).map((e=>({...e,is_checked:!!e.is_checked}))))}finally{h(!1)}}(0,l.useEffect)((()=>{g()}),[m]);const[b,v]=(0,l.useState)(null);(0,l.useEffect)((()=>{s.auth.getSession().then((({data:e})=>v(e.session?.user??null)));const{data:e}=s.auth.onAuthStateChange(((e,a)=>{v(a?.user??null)}));return()=>e.subscription.unsubscribe()}),[]);const _=async()=>{const{error:e}=await s.auth.signInWithOAuth({provider:"github"});e&&console.error("Login error:",e.message)};return b?(0,n.jsxs)("div",{className:t.container,dir:"ltr",children:[(0,n.jsx)("button",{type:"button",onClick:async()=>{const{error:e}=await s.auth.signOut();e&&console.error("Sign out error:",e.message)},children:"sign out"}),(0,n.jsxs)("header",{className:t.header,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:t.title,children:"\ud83d\udcda My Bookmarks"}),(0,n.jsx)("p",{className:t.subtitle,children:"A personal collection of books, courses, articles and tools \u2014 curated and messy."})]}),(0,n.jsx)("div",{className:t.topBar,children:(0,n.jsxs)("form",{className:t.inlineForm,onSubmit:async function(e){if(e.preventDefault(),r.name.trim()&&r.url.trim()){k((e=>({...e,add:!0})));try{const e={name:r.name.trim(),url:r.url.trim(),type:r.type,category:r.category,imageUrl:r.imageUrl||null,description:r.description||null,summary_link:r.summaryLink?.trim()||null},{error:a}=await s.from("bookmarks").insert([e]);a?(console.error("addBookmark error:",a),alert("Failed to add bookmark (see console).")):(d({name:"",url:"",type:"book",category:"backend",imageUrl:"",description:"",summaryLink:""}),g())}finally{k((e=>{const a={...e};return delete a.add,a}))}}else alert("Name and URL are required")},children:[(0,n.jsx)("input",{className:t.input,type:"text",placeholder:"Name",value:r.name,onChange:e=>d({...r,name:e.target.value})}),(0,n.jsx)("input",{className:t.input,type:"url",placeholder:"URL",value:r.url,onChange:e=>d({...r,url:e.target.value})}),(0,n.jsx)("input",{className:t.input,type:"url",placeholder:"imageUrl(cover)",value:r.imageUrl,onChange:e=>d({...r,imageUrl:e.target.value})}),(0,n.jsx)("select",{className:t.smallSelect,value:r.type,onChange:e=>d({...r,type:e.target.value}),children:i.map((e=>(0,n.jsx)("option",{value:e.value,children:e.label},e.value)))}),(0,n.jsx)("select",{className:t.smallSelect,value:r.category,onChange:e=>d({...r,category:e.target.value}),children:c.map((e=>(0,n.jsxs)("option",{value:e.value,children:[e.icon," ",e.label]},e.value)))}),(0,n.jsx)("button",{type:"submit",className:t.primaryBtn,disabled:!!p.add,title:"Add bookmark",children:p.add?"Adding...":"Add"})]})}),(0,n.jsx)("hr",{}),(0,n.jsxs)("div",{className:t.filters,children:[(0,n.jsxs)("select",{value:m.type,onChange:e=>u({...m,type:e.target.value}),className:t.select,"aria-label":"Filter by type",children:[(0,n.jsx)("option",{value:"",children:"All Types"}),i.map((e=>(0,n.jsx)("option",{value:e.value,children:e.label},e.value)))]}),(0,n.jsxs)("select",{value:m.category,onChange:e=>u({...m,category:e.target.value}),className:t.select,"aria-label":"Filter by category",children:[(0,n.jsx)("option",{value:"",children:"All Categories"}),c.map((e=>(0,n.jsxs)("option",{value:e.value,children:[e.icon," ",e.label]},e.value)))]}),(0,n.jsxs)("select",{value:m.hasSummary,onChange:e=>u({...m,hasSummary:e.target.value}),className:t.select,"aria-label":"Filter by summary",children:[(0,n.jsx)("option",{value:"",children:"All"}),(0,n.jsx)("option",{value:"with",children:"With summary"}),(0,n.jsx)("option",{value:"without",children:"Without summary"})]}),(0,n.jsx)("button",{type:"button",className:t.clearBtn,onClick:()=>u({type:"",category:""}),children:"Clear"})]})]}),(0,n.jsx)("main",{children:y?(0,n.jsx)("div",{className:t.empty,children:"Loading\u2026"}):0===e.length?(0,n.jsx)("div",{className:t.empty,children:"No bookmarks \u2014 try adding one."}):(0,n.jsx)("div",{className:t.grid,children:e.map((e=>(0,n.jsxs)("article",{className:`${t.card} ${e.is_checked?t.checked:""}`,children:[(0,n.jsxs)("a",{href:e.url,target:"_blank",rel:"noreferrer",className:t.cardImageWrap,"aria-label":`Open ${e.name}`,children:[(0,n.jsx)("img",{className:t.cardImage,src:e.imageUrl||o,alt:e.name,onError:e=>{e.currentTarget.onerror=null,e.currentTarget.src=o}}),(0,n.jsx)("div",{className:t.overlay,children:(0,n.jsx)("span",{className:t.typeBadge,children:i.find((a=>a.value===e.type))?.label||e.type})})]}),(0,n.jsxs)("div",{className:t.cardBody,children:[(0,n.jsx)("div",{className:t.cardHead,children:(0,n.jsx)("h3",{className:t.cardTitle,children:e.name})}),(0,n.jsxs)("span",{className:t.categoryChip,children:[c.find((a=>a.value===e.category))?.icon," ",c.find((a=>a.value===e.category))?.label||e.category]}),(0,n.jsx)("p",{className:t.cardDesc,children:e.description}),(0,n.jsxs)("div",{className:t.cardFooter,children:[e.summary_link?(0,n.jsx)("a",{href:e.summary_link,target:"_blank",rel:"noreferrer",className:t.summaryBtn,title:"Open summary",onClick:e=>e.stopPropagation(),children:"View Summary"}):(0,n.jsx)("button",{type:"button",className:t.summaryAddBtn,onClick:()=>async function(e){const r=e.summary_link||"",l=window.prompt("Enter summary URL (full URL)",r);if(null===l)return;const t=l.trim();k((a=>({...a,[`${e.id}-summary`]:!0}))),a((a=>a.map((a=>a.id===e.id?{...a,summary_link:t||null}:a))));try{const{error:a}=await s.from("bookmarks").update({summary_link:t||null}).eq("id",e.id);a&&(console.error("update summary error:",a),alert("Failed to update summary link (see console)."),g())}finally{k((a=>{const r={...a};return delete r[`${e.id}-summary`],r}))}}(e),disabled:!!p[`${e.id}-summary`],title:"Add summary link",children:"add summary"}),(0,n.jsx)("button",{type:"button",className:`${t.checkBtn} ${e.is_checked?t.checkBtnActive:""}`,onClick:()=>async function(e){const r=!e.is_checked;a((a=>a.map((a=>a.id===e.id?{...a,is_checked:r}:a)))),k((a=>({...a,[e.id]:!0})));try{const{error:l}=await s.from("bookmarks").update({is_checked:r}).eq("id",e.id);l&&(console.error("toggleChecked error:",l),a((a=>a.map((a=>a.id===e.id?{...a,is_checked:!r}:a)))))}finally{k((a=>{const r={...a};return delete r[e.id],r}))}}(e),disabled:!!p[e.id],title:e.is_checked?"Unmark":"Mark as important","aria-pressed":e.is_checked,children:e.is_checked?"Marked":"Mark"}),(0,n.jsx)("button",{type:"button",className:t.deleteBtn,onClick:()=>async function(e){if(confirm("Delete this bookmark?")){k((a=>({...a,[e]:!0})));try{const{error:a}=await s.from("bookmarks").delete().eq("id",e);a&&(console.error("deleteBookmark error:",a),alert("Failed to delete (see console).")),g()}finally{k((a=>{const r={...a};return delete r[e],r}))}}}(e.id),disabled:!!p[e.id],children:p[e.id]?"Deleting...":"Delete"})]})]})]},e.id)))})})]}):(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{children:"Please login to access your bookmarks"}),(0,n.jsx)("button",{onClick:_,children:"Sign in with GitHub"})]})}}}]);