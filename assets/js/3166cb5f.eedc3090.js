"use strict";(self.webpackChunkmy_notes=self.webpackChunkmy_notes||[]).push([[981],{8613:(e,a,r)=>{r.r(a),r.d(a,{default:()=>d});var t=r(6540);const l={container:"container_KUKa",header:"header_AQSU",title:"title_ZfZK",subtitle:"subtitle_lMwb",topBar:"topBar_siol",filters:"filters_vPCS",select:"select_oGfM",clearBtn:"clearBtn_wkFZ",inlineForm:"inlineForm_hZ7K",input:"input_Wj5n",smallSelect:"smallSelect_Xiof",primaryBtn:"primaryBtn_eSo3",grid:"grid_uMZU",card:"card_EhLz",checked:"checked_TgHq",cardImageWrap:"cardImageWrap_sya8",cardImage:"cardImage_zHom",overlay:"overlay_JyVE",typeBadge:"typeBadge_tL_4",cardBody:"cardBody_gbju",cardHead:"cardHead_ZkyB",cardTitle:"cardTitle_BBXi",categoryChip:"categoryChip_Sts1",cardDesc:"cardDesc_DokA",cardFooter:"cardFooter_AsIa",linkBtn:"linkBtn_QuEb",copyBtn:"copyBtn_lINE",checkBtn:"checkBtn_w6Rt",checkBtnActive:"checkBtnActive_p85M",deleteBtn:"deleteBtn_T24B",empty:"empty_N0Pt"};const c=(0,r(991).UU)("https://lkpldyzasmjxrmgpnbzj.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxrcGxkeXphc21qeHJtZ3BuYnpqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUxNTE3NjQsImV4cCI6MjA3MDcyNzc2NH0.56C2WbqDxK8umv1JX2gME2qvuN_VF_3KhDcheoeijyk");r(4586);var s=r(4848);const n=[{value:"book",label:"\ud83d\udcd6 Book"},{value:"audio",label:"\ud83c\udfa7 Audio"},{value:"course",label:"\ud83c\udf93 Course"},{value:"article",label:"\ud83d\udcdd Article"},{value:"tool",label:"\ud83d\udee0 Tool"}],i=[{value:"backend",label:"Backend / Systems",icon:"\ud83d\udda5"},{value:"frontend",label:"Frontend / UI",icon:"\ud83d\udd8c"},{value:"devops",label:"DevOps / Cloud",icon:"\u2601\ufe0f"},{value:"general",label:"General / Learning",icon:"\ud83d\udcda"},{value:"misc",label:"Misc / Reference",icon:"\ud83d\udccc"}],o="https://placehold.co/600x400";function d(){const[e,a]=(0,t.useState)([]),[r,d]=(0,t.useState)({name:"",url:"",type:"book",category:"backend",imageUrl:"",description:""}),[u,m]=(0,t.useState)({type:"",category:""}),[h,p]=(0,t.useState)(!1),[y,g]=(0,t.useState)({});async function k(){p(!0);try{let e=c.from("bookmarks").select("*").order("id",{ascending:!1});u.type&&(e=e.eq("type",u.type)),u.category&&(e=e.eq("category",u.category));const{data:r,error:t}=await e;t?(console.error("fetchBookmarks error:",t),a([])):a((r||[]).map((e=>({...e,is_checked:!!e.is_checked}))))}finally{p(!1)}}(0,t.useEffect)((()=>{k()}),[u]);const[b,v]=(0,t.useState)(null);(0,t.useEffect)((()=>{c.auth.getSession().then((({data:e})=>v(e.session?.user??null)));const{data:e}=c.auth.onAuthStateChange(((e,a)=>{v(a?.user??null)}));return()=>e.subscription.unsubscribe()}),[]);const j=async()=>{const{error:e}=await c.auth.signInWithOAuth({provider:"github"});e&&console.error("Login error:",e.message)};return b?(0,s.jsxs)("div",{className:l.container,dir:"ltr",children:[(0,s.jsx)("button",{type:"submit",onClick:async()=>{const{error:e}=await c.auth.signOut();e&&console.error("Sign out error:",e.message)},children:"sign out"}),(0,s.jsxs)("header",{className:l.header,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:l.title,children:"\ud83d\udcda My Bookmarks"}),(0,s.jsx)("p",{className:l.subtitle,children:"A personal collection of books, courses, articles and tools \u2014 curated and messy."})]}),(0,s.jsx)("div",{className:l.topBar,children:(0,s.jsxs)("form",{className:l.inlineForm,onSubmit:async function(e){if(e.preventDefault(),r.name.trim()&&r.url.trim()){g((e=>({...e,add:!0})));try{const e={name:r.name.trim(),url:r.url.trim(),type:r.type,category:r.category,imageUrl:r.imageUrl||null,description:r.description||null},{error:a}=await c.from("bookmarks").insert([e]);a?(console.error("addBookmark error:",a),alert("Failed to add bookmark (see console).")):(d({name:"",url:"",type:"book",category:"backend",imageUrl:"",description:""}),k())}finally{g((e=>{const a={...e};return delete a.add,a}))}}else alert("Name and URL are required")},children:[(0,s.jsx)("input",{className:l.input,type:"text",placeholder:"Name",value:r.name,onChange:e=>d({...r,name:e.target.value})}),(0,s.jsx)("input",{className:l.input,type:"url",placeholder:"URL",value:r.url,onChange:e=>d({...r,url:e.target.value})}),(0,s.jsx)("input",{className:l.input,type:"url",placeholder:"imageUrl(cover)",value:r.imageUrl,onChange:e=>d({...r,imageUrl:e.target.value})}),(0,s.jsx)("select",{className:l.smallSelect,value:r.type,onChange:e=>d({...r,type:e.target.value}),children:n.map((e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value)))}),(0,s.jsx)("select",{className:l.smallSelect,value:r.category,onChange:e=>d({...r,category:e.target.value}),children:i.map((e=>(0,s.jsxs)("option",{value:e.value,children:[e.icon," ",e.label]},e.value)))}),(0,s.jsx)("button",{type:"submit",className:l.primaryBtn,disabled:!!y.add,title:"Add bookmark",children:y.add?"Adding...":"Add"})]})}),(0,s.jsx)("hr",{}),(0,s.jsxs)("div",{className:l.filters,children:[(0,s.jsxs)("select",{value:u.type,onChange:e=>m({...u,type:e.target.value}),className:l.select,"aria-label":"Filter by type",children:[(0,s.jsx)("option",{value:"",children:"All Types"}),n.map((e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value)))]}),(0,s.jsxs)("select",{value:u.category,onChange:e=>m({...u,category:e.target.value}),className:l.select,"aria-label":"Filter by category",children:[(0,s.jsx)("option",{value:"",children:"All Categories"}),i.map((e=>(0,s.jsxs)("option",{value:e.value,children:[e.icon," ",e.label]},e.value)))]}),(0,s.jsx)("button",{type:"button",className:l.clearBtn,onClick:()=>m({type:"",category:""}),children:"Clear"})]})]}),(0,s.jsx)("main",{children:h?(0,s.jsx)("div",{className:l.empty,children:"Loading\u2026"}):0===e.length?(0,s.jsx)("div",{className:l.empty,children:"No bookmarks \u2014 try adding one."}):(0,s.jsx)("div",{className:l.grid,children:e.map((e=>(0,s.jsxs)("article",{className:`${l.card} ${e.is_checked?l.checked:""}`,children:[(0,s.jsxs)("a",{href:e.url,target:"_blank",rel:"noreferrer",className:l.cardImageWrap,"aria-label":`Open ${e.name}`,children:[(0,s.jsx)("img",{className:l.cardImage,src:e.imageUrl||o,alt:e.name,onError:e=>{e.currentTarget.onerror=null,e.currentTarget.src=o}}),(0,s.jsx)("div",{className:l.overlay,children:(0,s.jsx)("span",{className:l.typeBadge,children:n.find((a=>a.value===e.type))?.label||e.type})})]}),(0,s.jsxs)("div",{className:l.cardBody,children:[(0,s.jsx)("div",{className:l.cardHead,children:(0,s.jsx)("h3",{className:l.cardTitle,children:e.name})}),(0,s.jsxs)("span",{className:l.categoryChip,children:[i.find((a=>a.value===e.category))?.icon," ",i.find((a=>a.value===e.category))?.label||e.category]}),(0,s.jsx)("p",{className:l.cardDesc,children:e.description}),(0,s.jsxs)("div",{className:l.cardFooter,children:[(0,s.jsx)("a",{href:e.url,target:"_blank",rel:"noreferrer",className:l.linkBtn,onClick:e=>e.stopPropagation(),children:"Open"}),(0,s.jsx)("button",{type:"button",className:`${l.checkBtn} ${e.is_checked?l.checkBtnActive:""}`,onClick:()=>async function(e){const r=!e.is_checked;a((a=>a.map((a=>a.id===e.id?{...a,is_checked:r}:a)))),g((a=>({...a,[e.id]:!0})));try{const{error:t}=await c.from("bookmarks").update({is_checked:r}).eq("id",e.id);t&&(console.error("toggleChecked error:",t),a((a=>a.map((a=>a.id===e.id?{...a,is_checked:!r}:a)))))}finally{g((a=>{const r={...a};return delete r[e.id],r}))}}(e),disabled:!!y[e.id],title:e.is_checked?"Unmark":"Mark as important","aria-pressed":e.is_checked,children:e.is_checked?"Marked":"Mark"}),(0,s.jsx)("button",{type:"button",className:l.deleteBtn,onClick:()=>async function(e){if(confirm("Delete this bookmark?")){g((a=>({...a,[e]:!0})));try{const{error:a}=await c.from("bookmarks").delete().eq("id",e);a&&(console.error("deleteBookmark error:",a),alert("Failed to delete (see console).")),k()}finally{g((a=>{const r={...a};return delete r[e],r}))}}}(e.id),disabled:!!y[e.id],title:"Delete",children:y[e.id]?"Deleting...":"Delete"}),(0,s.jsx)("button",{type:"button",className:l.copyBtn,onClick:()=>navigator.clipboard?.writeText(e.url),title:"Copy URL",children:"Copy"})]})]})]},e.id)))})})]}):(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{children:"Please login to access your bookmarks"}),(0,s.jsx)("button",{onClick:j,children:"Sign in with GitHub"})]})}}}]);