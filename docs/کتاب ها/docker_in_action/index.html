<!doctype html>
<html lang="fa" dir="rtl" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-کتاب ها/docker_in_action" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.0">
<title data-rh="true">Docker In Action | یادداشت های من</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://github.com/meiti-x.png"><meta data-rh="true" name="twitter:image" content="https://github.com/meiti-x.png"><meta data-rh="true" property="og:url" content="https://meiti-x.github.io/my-notes/docs/کتاب ها/docker_in_action"><meta data-rh="true" property="og:locale" content="fa"><meta data-rh="true" name="docusaurus_locale" content="fa"><meta data-rh="true" name="docsearch:language" content="fa"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Docker In Action | یادداشت های من"><meta data-rh="true" name="description" content="برداشت های من از کتاب داکر در عمل"><meta data-rh="true" property="og:description" content="برداشت های من از کتاب داکر در عمل"><meta data-rh="true" name="keywords" content="book,document,docker in action"><link data-rh="true" rel="icon" href="/my-notes/img/docusaurus.png"><link data-rh="true" rel="canonical" href="https://meiti-x.github.io/my-notes/docs/کتاب ها/docker_in_action"><link data-rh="true" rel="alternate" href="https://meiti-x.github.io/my-notes/docs/کتاب ها/docker_in_action" hreflang="fa"><link data-rh="true" rel="alternate" href="https://meiti-x.github.io/my-notes/docs/کتاب ها/docker_in_action" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Docker In Action","item":"https://meiti-x.github.io/my-notes/docs/کتاب ها/docker_in_action"}]}</script><link rel="alternate" type="application/rss+xml" href="/my-notes/blog/rss.xml" title="یادداشت های من RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/my-notes/blog/atom.xml" title="یادداشت های من Atom Feed">




<link rel="icon" href="/my-notes/img/docusaurus.png">
<link rel="manifest" href="/my-notes/manifest.json">
<meta name="theme-color" content="rgb(37, 194, 160)"><link rel="stylesheet" href="/my-notes/assets/css/styles.d56132eb.css">
<script src="/my-notes/assets/js/runtime~main.dcfed795.js" defer="defer"></script>
<script src="/my-notes/assets/js/main.2c0319b4.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="https://m.media-amazon.com/images/I/71VgrJPXWiL._SL1500_.jpg"><div role="region" aria-label="پرش به مطلب اصلی"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">پرش به مطلب اصلی</a></div><nav aria-label="صفحه اصلی" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="باز و بست منو" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/my-notes/"><b class="navbar__title text--truncate">صفحه اصلی</b></a><a class="navbar__item navbar__link" href="/my-notes/docs/intro">مستندات</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/meiti-x" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="بین حالت تاریک و روشن سوئیچ کنید (الان system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="بازگشت به بالا" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="نوار کناری مستندات" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/my-notes/docs/intro">مقدمه</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/my-notes/docs/عمومی/بخش_تاریک_روان_از_دیدگاه_یونگ">عمومی</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/my-notes/docs/نرم‌افزار/Rabbitmq">نرم‌افزار</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/my-notes/docs/کتاب ها/intro">کتاب ها</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/my-notes/docs/کتاب ها/intro">مقدمه</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/my-notes/docs/کتاب ها/docker_in_action">Docker In Action</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="نشانگر صفحات"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="صفحه اصلی" class="breadcrumbs__link" href="/my-notes/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">کتاب ها</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Docker In Action</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">مطالب این صفحه</button></div><div class="theme-doc-markdown markdown"><header><h1>Docker In Action</h1></header><img src="https://m.media-amazon.com/images/I/71VgrJPXWiL._SL1500_.jpg" height="400">
<p><strong>نام کتاب</strong>: داکر در عمل</p>
<p><strong>ویرایش:</strong> دوم</p>
<p><strong>سال چاپ</strong>:۱۳۹۶</p>
<p><strong>سال خوندن من</strong>: ۱۴۰۴ بهار</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="مقدمه">مقدمه<a href="#مقدمه" class="hash-link" aria-label="لینک مستقیم به مقدمه" title="لینک مستقیم به مقدمه">​</a></h2>
<p>این قسمت بیشتر در مورد فلسفه داکر و چرایی اش هست و اینکه چرا داکر باعث <em>serviceability</em> <em>longevity</em> در برنامه هامون میشه</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="داکر-چیه">داکر چیه؟<a href="#داکر-چیه" class="hash-link" aria-label="لینک مستقیم به داکر چیه؟" title="لینک مستقیم به داکر چیه؟">​</a></h3>
<p>داکر یک ابزار لجستیکی که برای بسته بندی و حمل و نقل کانتینر ها هستش و همه این هارو به کمک مفهموی به اسم <em>containers</em> که در سیستم عامل ها هست انجام میده. داکر ابزار جدیدی اختراع نکرده و و همه چیزهای که که در کنار هم قرار داده وجود داشته صرفا پیچیدگی پیاده سازی کانتینر ها یا jail هارو از دید ما پنهون کرده که باعث شده ایزوله سازی برای ما کار راحتی باشه مثل اکتشاف کانتینر برای اولین بار. داکر از این مفاهیم برای ایزوله کردن استفاده میکنه:</p>
<span dir="ltr"><ul>
<li><strong>UTS</strong> <em>namespace</em> -&gt; host and domain name</li>
<li><strong>MNT</strong> <em>namespace</em> -&gt; filesystem access and structure</li>
<li><strong>IPC</strong> <em>namespace</em> -&gt; process communication over shared memory</li>
<li><strong>NET</strong> <em>namespace</em> -&gt; network access and structure</li>
<li><strong>USR</strong> <em>namespace</em> -&gt; usernames and identifier</li>
<li><strong>chroot syscall</strong> -&gt; control the location of filesystem root</li>
<li><strong>cgroup</strong> -&gt; resource protection</li>
<li><strong>CAP drop</strong> -&gt; OS feature restriction</li>
<li><strong>security modules</strong></li>
</ul></span>
<p>بخاطر همین موارد داکر توی ویندوز فقط با VM یا WSL اجرا میشه</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="کانتینر-چیه">کانتینر چیه؟<a href="#کانتینر-چیه" class="hash-link" aria-label="لینک مستقیم به کانتینر چیه؟" title="لینک مستقیم به کانتینر چیه؟">​</a></h4>
<p>به صورت تاریخی اگه بخوایم بگیم سیستم عامل های <code>UNIX-style</code> مثل لینوکس از عبارتی مثل <em>jail</em> برای این موضوع استفاده میکردن. این باعث میشد که یه ران تایم داشته باشیم که محدوده دسترسی یک برنامه ای که jail شده مدیریت کنیم.</p>
<p><strong>آیا کانتینر همون مفهوم VM یا Virtualization هستش؟</strong> جواب کوتاه نه</p>
<p>جواب بلند: برخلاف VM ها داکر از هیچ منابع virtual سخت افزاری استفاده نمیکنه. برنامه های که داخل کانتینر هاست شدن مستقیما با کرنل در ارتباط هستن (با واسطه سیستم عامل) خیلی از برنامه های در isolation اجرا میشن بدون اینکه نیاز باشه مثل VM ها سیستم عامل کاملا بوت بشن.</p>
<p>با توجه به پیشرفت سخت افزار VM ها هم گزینه سریعی هستن. ولی فقط وقتی که <code>OS</code> کاملا بوت شود ولی این delay رو در داکر نداریم و از طرفی VM یک برنامه <mark> user space هستش ولی داکر kernel space هستش </mark> که باعث میشه <code>syscall</code> هامون سریعتر بشه و درنهایت از منابع بهینه استفاده میشه</p>
<p><strong>تفاوت image با کانتینر چیه؟</strong> به کامپوننتی که یه کانیتنر رو پر میکنه میگن image. داکر کانتینر هارو با image ها میسازن</p>
<ul>
<li>
<p>یک Docker image مثل یک کانتینر فیزیکی حمل بار هست که اپلیکیشن و وابستگی‌هاش رو (به‌جز هسته سیستم‌عامل) با خودش حمل می‌کنه.</p>
</li>
<li>
<p><strong>Image:</strong> الگوی فقط-خواندنی که شامل تمام وابستگی‌ها و تنظیمات لازم برای اجرای برنامه است</p>
</li>
<li>
<p><strong>کانتینر:</strong> نمونه‌ی درحال اجرا از یک Image که لایه نوشتنی نیز به آن اضافه شده است</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="چه-مشکلاتی-رو-داکر-حل-میکنه">چه مشکلاتی رو داکر حل میکنه؟<a href="#چه-مشکلاتی-رو-داکر-حل-میکنه" class="hash-link" aria-label="لینک مستقیم به چه مشکلاتی رو داکر حل میکنه؟" title="لینک مستقیم به چه مشکلاتی رو داکر حل میکنه؟">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="انسجام">انسجام<a href="#انسجام" class="hash-link" aria-label="لینک مستقیم به انسجام" title="لینک مستقیم به انسجام">​</a></h4>
<p>داکر مثل یک پرتال میمونه :) بعد از پایانش چیزی روی ذخیره نمیکن مگر ما بهش گفته بشیم که ذخیره کنه که این باعث میشه انسجام در سیستم خودمون داشته باشیم</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="پرتابیلیتی">پرتابیلیتی<a href="#پرتابیلیتی" class="hash-link" aria-label="لینک مستقیم به پرتابیلیتی" title="لینک مستقیم به پرتابیلیتی">​</a></h4>
<ul>
<li>اجرای یکسان روی هر سیستمی که داکر داشته باشه</li>
<li>استقرار در محیط‌های مختلف بدون تغییرات</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="امنیت">امنیت<a href="#امنیت" class="hash-link" aria-label="لینک مستقیم به امنیت" title="لینک مستقیم به امنیت">​</a></h4>
<p>مثل زندان های معمولی(‍<code>jail</code>) هر چیزی که داخل کانتینر هستش فقط به چیزهای دسترسی داخلش وجود داره. مگر اینکه یه مجوزی به صورت explicit از سمت یوزر داده بشه. کانتینر ها محمدوده تاثیر روی برنامه های دیگه رو محدود میکنن، دیتای که میتونن دسترسی داشته باشن، شبکه ای که میتونن باشن، و ریسورس های که میتونن داشته باشن</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="چرا-داکر-مهمه">چرا داکر مهمه<a href="#چرا-داکر-مهمه" class="hash-link" aria-label="لینک مستقیم به چرا داکر مهمه" title="لینک مستقیم به چرا داکر مهمه">​</a></h3>
<p>داکر یک <em>انتزاع</em> ایجاد میکنه. انتزاعی که به شما کمک میکنه روی مسايل سخت تر کار کنید. یعنی به جای اینکه فکرمون رو معطوف به چگونگی نصب و استقرار برنامه مون کنیم به نوشتن خوده برنامه فکر کنیم</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="بخش-اول-process-isolation-and-enviroment-independet-computing">بخش اول: Process Isolation And Enviroment Independet Computing<a href="#بخش-اول-process-isolation-and-enviroment-independet-computing" class="hash-link" aria-label="لینک مستقیم به بخش اول: Process Isolation And Enviroment Independet Computing" title="لینک مستقیم به بخش اول: Process Isolation And Enviroment Independet Computing">​</a></h2>
<p>داکر از یک چیزی به اسم <mark>PID namespace </mark> برای ایزوله کردن پراسس های داخل کانتیر استفاده کرده(برای جزئییات داک PID رو پیدا کن)</p>
<p>کانتینر های داکر توی ۶ تا وضعیت هستن <code>Created, Running, Restarting, Paused, Removing and Exited</code>
به صورت پیشفرض داکر توی کامند <code>docker ps</code> فقط کانتینر های در حال اجر رو نشون میده</p>
<blockquote>
<p>داکر جلوی Circular Depdencies رو میگیره</p>
</blockquote>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="داکر-image-layers">داکر image layers<a href="#داکر-image-layers" class="hash-link" aria-label="لینک مستقیم به داکر image layers" title="لینک مستقیم به داکر image layers">​</a></h4>
<p>وقتی توی Dockerfile مثلاً از دستوراتی مثل <code>RUN</code>, <code>COPY</code>, <code>ADD</code> استفاده می‌کنی، Docker برای هر کدوم یه لایه جدید می‌سازه. به این لایه های میگن image layers(برای جزییات دنبال Union File system بگرد)</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="ساخت-و-تغییرات️">ساخت و تغییرات🏗️<a href="#ساخت-و-تغییرات️" class="hash-link" aria-label="لینک مستقیم به ساخت و تغییرات🏗️" title="لینک مستقیم به ساخت و تغییرات🏗️">​</a></h5>
<ul>
<li>وقتی از یک Dockerfile استفاده می‌کنی، هر دستور مثل <code>RUN</code> یا <code>COPY</code> باعث ساختن یک لایه جدید می‌شه.</li>
<li>همچنین می‌تونی داخل یک container تغییر بدی و بعد با <code>‍docker container commit‍‍</code> اون تغییرات رو به شکل یک لایه جدید ذخیره کنی.</li>
<li>وقتی داخل یک container فایلی رو تغییر بدی یا حذف کنی، اون تغییر توی <strong>بالا‌ترین</strong> لایه ثبت می‌شه. Docker از چیزی به‌اسم <em>union filesystem</em> استفاده می‌کنه تا این لایه‌ها رو ترکیب کنه.</li>
<li>اگر فایلی تغییر کنه، معمولاً نسخه‌ی جدیدش کپی می‌شه توی لایه بالا و تغییر روی اون اعمال می‌شه (این رو می‌گن <em>copy-on-write</em>). این می‌تونه روی performance و حجم imag تأثیر بذاره.</li>
<li>اگه تغییری در لایه ای اتفاق بیافته لایه های بعدی هم از کش استفاده نمیکنن و دوباره حساب میکنن</li>
<li>هر دستور در Dockerfile (مثل COPY, RUN, ADD, …) به همراه داده‌هایی که روی اون اثر می‌ذاره، تبدیل به یک <strong>هش</strong> (hash) می‌شه. و این یه جا ذخیره میشه داکر از روی این میفهمه که یه لایه تغییر کرده یا نه</li>
</ul>
<p>داخل کانتینر ها ساختار ایزوله ای دقیقا مشابه با ساختار سیستم های unixی ساخته میشه و این به کمک <strong>mnt namespace</strong> برای ایجاد ایزولیشن هستش</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="storage-and-volume">Storage and Volume<a href="#storage-and-volume" class="hash-link" aria-label="لینک مستقیم به Storage and Volume" title="لینک مستقیم به Storage and Volume">​</a></h4>
<p>هر داکر فایل در زمان اجرا یک writeable layer داره که روی همه لایه ها هست برای نوشتن تغییرات داخل یه کانتینر و وقتی کانتینر ها به دلیلی خارج میشن، هر چی که در اینجا نوشته شده دور ریخته میشه به همین دلیل هستش که ما برای دیتا های که طولانی مدت لازم داریم به volume احتیاج داریم</p>
<p>Union filesystem که داکر ازش استفاده می‌کنه برای اجرای موقت برنامه‌ها خوبه، چون از چند لایه ساخته شده و تغییرات فقط روی لایه بالایی نوشته می‌شن. اما برای نگه‌داری داده‌های بلندمدت یا اشتراک‌گذاری داده بین کانتینرها و سیستم میزبان مناسب نیست، چون این تغییرات ناپایدارن و با پاک شدن کانتینر از بین می‌رن.</p>
<p>در مقابل، لینوکس با استفاده از mount point به ما اجازه می‌ده مسیرهایی در فایل‌سیستم رو به دیسک‌های واقعی یا مجازی متصل کنیم. این ساختار باعث می‌شه داده‌ها مستقل از کانتینر باقی بمونن و بتونیم اون‌ها رو بین کانتینرها یا با میزبان به اشتراک بذاریم.</p>
<p>پس برای کار با داده‌های مهم و دائمی، باید از mount point (مثل volumeها در داکر) استفاده کنیم، نه صرفاً union filesystem.</p>
<p>فرض کن یه فلش USB داری که می‌خوای توی لینوکس بهش دسترسی داشته باشی.</p>
<p>🔹 بدون اینکه بدونی از کدوم دیسک استفاده می‌کنی:</p>
<p>وقتی فلش رو به سیستم وصل می‌کنی، لینوکس اون رو به یه مسیر مثل /media/mahdi/usb-drive mount می‌کنه.</p>
<p>از اون لحظه به بعد، تو فقط با اون مسیر کار می‌کنی، مثلا:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd /media/mahdi/usb-drive</span><br></span></code></pre></div></div>
<p>🧩 ارتباطش با کانتینر:</p>
<p>همین مفهوم توی کانتینر هم هست. مثلاً اگه بخوای یه دایرکتوری از سیستم میزبان رو داخل کانتینر ببری، انگار اون USB رو mount کردی تو کانتینر. از دید برنامه داخل کانتینر، انگار اون مسیر بخشی از فایل‌سیستمشه، ولی در واقع داره از یه جای دیگه میاد.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="networking">Networking<a href="#networking" class="hash-link" aria-label="لینک مستقیم به Networking" title="لینک مستقیم به Networking">​</a></h4>
<p>وقتی کانتینرها روی یک ماشین (هاست) اجرا میشن، باید بتونن با هم و با خارج هاست ارتباط برقرار کنن. داکر برای این ارتباط، یک لایه انتزاعی شبکه می‌سازه که به کانتینرها امکان می‌ده بدون وابستگی مستقیم به شبکه میزبان، به صورت ایزوله ولی قابل دسترسی کار کنن.</p>
<p><strong>انواع شبکه‌های در داکر:</strong></p>
<ul>
<li><strong>Bridge</strong> (پیش‌فرض):
کانتینرها آدرس <em>IP</em> خصوصی منحصر به فرد می‌گیرن و می‌تونن با هم روی همین شبکه داخلی صحبت کنن. داکر با <em>NAT</em> ترافیک خروجی رو به بیرون منتقل می‌کنه.</li>
<li><strong>Host</strong>:
کانتینر شبکه میزبان رو مستقیماً استفاده می‌کنه، یعنی مثل یه برنامه عادی روی سیستم اجرا می‌شه و تمام شبکه میزبان رو داره. این حالت ایزوله نیست و کمتر توصیه می‌شه.</li>
<li><strong>None</strong>:
کانتینر هیچ شبکه‌ای نداره، فقط loopback داخلی داره. برای برنامه‌هایی که به شبکه نیازی ندارن مناسب است.</li>
</ul>
<p>نقش <strong>پورت‌ها</strong>: برای دسترسی به برنامه‌های داخل کانتینر از خارج، باید پورت‌های کانتینر به پورت‌های میزبان متصل (publish) بشن. مثلاً -p 8080:80 یعنی پورت ۸۰ کانتینر روی پورت ۸۰۸۰ میزبان قرار می‌گیره.</p>
<p>وقتی یک کانتینر ایجاد می‌کنی، داکر براش یک <strong>network namespace</strong> جداگانه می‌سازه. این یعنی کانتینر:</p>
<ul>
<li>کارت شبکه خودش رو داره (مثل eth0)</li>
<li>جدول routing خودش رو داره</li>
<li>آدرس‌های IP خودش رو داره
بنابراین از دید سیستم‌عامل، کانتینر یه سیستم مستقل با شبکه مجزاست.</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">آخرین به روز رسانی<!-- --> در تاریخ <b><time datetime="2025-06-12T19:43:27.000Z" itemprop="dateModified">۲۲ خرداد ۱۴۰۴</time></b></span></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="صفحات مستندات"><a class="pagination-nav__link pagination-nav__link--prev" href="/my-notes/docs/کتاب ها/intro"><div class="pagination-nav__sublabel">قبلی</div><div class="pagination-nav__label">مقدمه</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#مقدمه" class="table-of-contents__link toc-highlight">مقدمه</a><ul><li><a href="#داکر-چیه" class="table-of-contents__link toc-highlight">داکر چیه؟</a></li><li><a href="#چه-مشکلاتی-رو-داکر-حل-میکنه" class="table-of-contents__link toc-highlight">چه مشکلاتی رو داکر حل میکنه؟</a></li><li><a href="#چرا-داکر-مهمه" class="table-of-contents__link toc-highlight">چرا داکر مهمه</a></li></ul></li><li><a href="#بخش-اول-process-isolation-and-enviroment-independet-computing" class="table-of-contents__link toc-highlight">بخش اول: Process Isolation And Enviroment Independet Computing</a></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>