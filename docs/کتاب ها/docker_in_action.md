---
title: Docker In Action
tags:
  - book
  - docker
description: ุจุฑุฏุงุดุช ูุง ูู ุงุฒ ฺฉุชุงุจ ุฏุงฺฉุฑ ุฏุฑ ุนูู
---

<img src="https://m.media-amazon.com/images/I/71VgrJPXWiL._SL1500_.jpg"  height="400"/>

**ูุงู ฺฉุชุงุจ**: ุฏุงฺฉุฑ ุฏุฑ ุนูู

**ูุฑุงุด:** ุฏูู

**ุณุงู ฺุงูพ**:ฑณนถ

**ุณุงู ุฎููุฏู ูู**: ฑดฐด ุจูุงุฑ

---

## ููุฏูู

ุงู ูุณูุช ุจุดุชุฑ ุฏุฑ ููุฑุฏ ููุณูู ุฏุงฺฉุฑ ู ฺุฑุง ุงุด ูุณุช ู ุงูฺฉู ฺุฑุง ุฏุงฺฉุฑ ุจุงุนุซ _serviceability_ _longevity_ ุฏุฑ ุจุฑูุงูู ูุงููู ูุดู

## ุฏุงฺฉุฑ ฺูุ

ุฏุงฺฉุฑ ฺฉ ุงุจุฒุงุฑ ูุฌุณุชฺฉ ฺฉู ุจุฑุง ุจุณุชู ุจูุฏ ู ุญูู ู ููู ฺฉุงูุชูุฑ ูุง ูุณุชุด ู ููู ุงู ูุงุฑู ุจู ฺฉูฺฉ ููููู ุจู ุงุณู _containers_ ฺฉู ุฏุฑ ุณุณุชู ุนุงูู ูุง ูุณุช ุงูุฌุงู ูุฏู. ุฏุงฺฉุฑ ุงุจุฒุงุฑ ุฌุฏุฏ ุงุฎุชุฑุงุน ูฺฉุฑุฏู ู ู ููู ฺุฒูุง ฺฉู ฺฉู ุฏุฑ ฺฉูุงุฑ ูู ูุฑุงุฑ ุฏุงุฏู ูุฌูุฏ ุฏุงุดุชู ุตุฑูุง ูพฺุฏฺฏ ูพุงุฏู ุณุงุฒ ฺฉุงูุชูุฑ ูุง ุง jail ูุงุฑู ุงุฒ ุฏุฏ ูุง ูพูููู ฺฉุฑุฏู ฺฉู ุจุงุนุซ ุดุฏู ุงุฒููู ุณุงุฒ ุจุฑุง ูุง ฺฉุงุฑ ุฑุงุญุช ุจุงุดู ูุซู ุงฺฉุชุดุงู ฺฉุงูุชูุฑ ุจุฑุง ุงููู ุจุงุฑ. ุฏุงฺฉุฑ ุงุฒ ุงู ููุงูู ุจุฑุง ุงุฒููู ฺฉุฑุฏู ุงุณุชูุงุฏู ูฺฉูู:

<span dir="ltr">

- **UTS** _namespace_ -> host and domain name
- **MNT** _namespace_ -> filesystem access and structure
- **IPC** _namespace_ -> process communication over shared memory
- **NET** _namespace_ -> network access and structure
- **USR** _namespace_ -> usernames and identifier
- **chroot syscall** -> control the location of filesystem root
- **cgroup** -> resource protection
- **CAP drop** -> OS feature restriction
- **security modules**

</span>

ุจุฎุงุทุฑ ููู ููุงุฑุฏ ุฏุงฺฉุฑ ุชู ููุฏูุฒ ููุท ุจุง VM ุง WSL ุงุฌุฑุง ูุดู

### ฺฉุงูุชูุฑ ฺูุ

ุจู ุตูุฑุช ุชุงุฑุฎ ุงฺฏู ุจุฎูุงู ุจฺฏู ุณุณุชู ุนุงูู ูุง `UNIX-style` ูุซู ูููฺฉุณ ุงุฒ ุนุจุงุฑุช ูุซู _jail_ ุจุฑุง ุงู ููุถูุน ุงุณุชูุงุฏู ูฺฉุฑุฏู. ุงู ุจุงุนุซ ูุดุฏ ฺฉู ู ุฑุงู ุชุงู ุฏุงุดุชู ุจุงุดู ฺฉู ูุญุฏูุฏู ุฏุณุชุฑุณ ฺฉ ุจุฑูุงูู ุง ฺฉู jail ุดุฏู ูุฏุฑุช ฺฉูู.

**ุขุง ฺฉุงูุชูุฑ ูููู ููููู VM ุง Virtualization ูุณุชุดุ** ุฌูุงุจ ฺฉูุชุงู ูู

ุฌูุงุจ ุจููุฏ: ุจุฑุฎูุงู VM ูุง ุฏุงฺฉุฑ ุงุฒ ูฺ ููุงุจุน virtual ุณุฎุช ุงูุฒุงุฑ ุงุณุชูุงุฏู ููฺฉูู. ุจุฑูุงูู ูุง ฺฉู ุฏุงุฎู ฺฉุงูุชูุฑ ูุงุณุช ุดุฏู ูุณุชููุง ุจุง ฺฉุฑูู ุฏุฑ ุงุฑุชุจุงุท ูุณุชู (ุจุง ูุงุณุทู ุณุณุชู ุนุงูู) ุฎู ุงุฒ ุจุฑูุงูู ูุง ุฏุฑ isolation ุงุฌุฑุง ูุดู ุจุฏูู ุงูฺฉู ูุงุฒ ุจุงุดู ูุซู VM ูุง ุณุณุชู ุนุงูู ฺฉุงููุง ุจูุช ุจุดู.

ุจุง ุชูุฌู ุจู ูพุดุฑูุช ุณุฎุช ุงูุฒุงุฑ VM ูุง ูู ฺฏุฒูู ุณุฑุน ูุณุชู. ูู ููุท ููุช ฺฉู `OS` ฺฉุงููุง ุจูุช ุดูุฏ ูู ุงู delay ุฑู ุฏุฑ ุฏุงฺฉุฑ ูุฏุงุฑู ู ุงุฒ ุทุฑู VM ฺฉ ุจุฑูุงูู <mark> user space ูุณุชุด ูู ุฏุงฺฉุฑ kernel space ูุณุชุด </mark> ฺฉู ุจุงุนุซ ูุดู `syscall` ูุงููู ุณุฑุนุชุฑ ุจุดู ู ุฏุฑููุงุช ุงุฒ ููุงุจุน ุจููู ุงุณุชูุงุฏู ูุดู

**ุชูุงูุช image ุจุง ฺฉุงูุชูุฑ ฺูุ** ุจู ฺฉุงููพูููุช ฺฉู ู ฺฉุงูุชูุฑ ุฑู ูพุฑ ูฺฉูู ูฺฏู image. ุฏุงฺฉุฑ ฺฉุงูุชูุฑ ูุงุฑู ุจุง image ูุง ูุณุงุฒู

- ฺฉ Docker image ูุซู ฺฉ ฺฉุงูุชูุฑ ูุฒฺฉ ุญูู ุจุงุฑ ูุณุช ฺฉู ุงูพูฺฉุดู ู ูุงุจุณุชฺฏโูุงุด ุฑู (ุจูโุฌุฒ ูุณุชู ุณุณุชูโุนุงูู) ุจุง ุฎูุฏุด ุญูู ูโฺฉูู.

- **Image:** ุงูฺฏู ููุท-ุฎูุงูุฏู ฺฉู ุดุงูู ุชูุงู ูุงุจุณุชฺฏโูุง ู ุชูุธูุงุช ูุงุฒู ุจุฑุง ุงุฌุฑุง ุจุฑูุงูู ุงุณุช
- **ฺฉุงูุชูุฑ:** ูููููโ ุฏุฑุญุงู ุงุฌุฑุง ุงุฒ ฺฉ Image ฺฉู ูุงู ููุดุชู ูุฒ ุจู ุขู ุงุถุงูู ุดุฏู ุงุณุช

### ฺู ูุดฺฉูุงุช ุฑู ุฏุงฺฉุฑ ุญู ูฺฉููุ

##### ุงูุณุฌุงู

ุฏุงฺฉุฑ ูุซู ฺฉ ูพุฑุชุงู ููููู :) ุจุนุฏ ุงุฒ ูพุงุงูุด ฺุฒ ุฑู ุฐุฎุฑู ููฺฉู ูฺฏุฑ ูุง ุจูุด ฺฏูุชู ุจุดู ฺฉู ุฐุฎุฑู ฺฉูู ฺฉู ุงู ุจุงุนุซ ูุดู ุงูุณุฌุงู ุฏุฑ ุณุณุชู ุฎูุฏููู ุฏุงุดุชู ุจุงุดู

##### ูพุฑุชุงุจูุช

- ุงุฌุฑุง ฺฉุณุงู ุฑู ูุฑ ุณุณุชู ฺฉู ุฏุงฺฉุฑ ุฏุงุดุชู ุจุงุดู
- ุงุณุชูุฑุงุฑ ุฏุฑ ูุญุทโูุง ูุฎุชูู ุจุฏูู ุชุบุฑุงุช

##### ุงููุช

ูุซู ุฒูุฏุงู ูุง ูุนููู(โ`jail`) ูุฑ ฺุฒ ฺฉู ุฏุงุฎู ฺฉุงูุชูุฑ ูุณุชุด ููุท ุจู ฺุฒูุง ุฏุณุชุฑุณ ุฏุงุฎูุด ูุฌูุฏ ุฏุงุฑู. ูฺฏุฑ ุงูฺฉู ู ูุฌูุฒ ุจู ุตูุฑุช explicit ุงุฒ ุณูุช ูุฒุฑ ุฏุงุฏู ุจุดู. ฺฉุงูุชูุฑ ูุง ูุญูุฏูุฏู ุชุงุซุฑ ุฑู ุจุฑูุงูู ูุง ุฏฺฏู ุฑู ูุญุฏูุฏ ูฺฉููุ ุฏุชุง ฺฉู ูุชููู ุฏุณุชุฑุณ ุฏุงุดุชู ุจุงุดูุ ุดุจฺฉู ุง ฺฉู ูุชููู ุจุงุดูุ ู ุฑุณูุฑุณ ูุง ฺฉู ูุชููู ุฏุงุดุชู ุจุงุดู

#### ฺุฑุง ุฏุงฺฉุฑ ูููู

ุฏุงฺฉุฑ ฺฉ _ุงูุชุฒุงุน_ ุงุฌุงุฏ ูฺฉูู. ุงูุชุฒุงุน ฺฉู ุจู ุดูุง ฺฉูฺฉ ูฺฉูู ุฑู ูุณุงูู ุณุฎุช ุชุฑ ฺฉุงุฑ ฺฉูุฏ. ุนู ุจู ุฌุง ุงูฺฉู ูฺฉุฑููู ุฑู ูุนุทูู ุจู ฺฺฏููฺฏ ูุตุจ ู ุงุณุชูุฑุงุฑ ุจุฑูุงูู ููู ฺฉูู ุจู ููุดุชู ุฎูุฏู ุจุฑูุงูู ูฺฉุฑ ฺฉูู

---

## ุจุฎุด ุงูู: Process Isolation And Enviroment Independet Computing

ุฏุงฺฉุฑ ุงุฒ ฺฉ ฺุฒ ุจู ุงุณู <mark>PID namespace </mark> ุจุฑุง ุงุฒููู ฺฉุฑุฏู ูพุฑุงุณุณ ูุง ุฏุงุฎู ฺฉุงูุชุฑ ุงุณุชูุงุฏู ฺฉุฑุฏู(ุจุฑุง ุฌุฒุฆุงุช ุฏุงฺฉ PID ุฑู ูพุฏุง ฺฉู)

ฺฉุงูุชูุฑ ูุง ุฏุงฺฉุฑ ุชู ถ ุชุง ูุถุนุช ูุณุชู `Created, Running, Restarting, Paused, Removing and Exited`
ุจู ุตูุฑุช ูพุดูุฑุถ ุฏุงฺฉุฑ ุชู ฺฉุงููุฏ `docker ps` ููุท ฺฉุงูุชูุฑ ูุง ุฏุฑ ุญุงู ุงุฌุฑ ุฑู ูุดูู ูุฏู

> ุฏุงฺฉุฑ ุฌูู Circular Depdencies ุฑู ูฺฏุฑู

### ุฏุงฺฉุฑ image layers

ููุช ุชู Dockerfile ูุซูุงู ุงุฒ ุฏุณุชูุฑุงุช ูุซู `RUN`, `COPY`, `ADD` ุงุณุชูุงุฏู ูโฺฉูุ Docker ุจุฑุง ูุฑ ฺฉุฏูู ู ูุงู ุฌุฏุฏ ูโุณุงุฒู. ุจู ุงู ูุงู ูุง ูฺฏู image layers(ุจุฑุง ุฌุฒุงุช ุฏูุจุงู Union File system ุจฺฏุฑุฏ)

##### ุณุงุฎุช ู ุชุบุฑุงุช๐๏ธ

- ููุช ุงุฒ ฺฉ Dockerfile ุงุณุชูุงุฏู ูโฺฉูุ ูุฑ ุฏุณุชูุฑ ูุซู `RUN` ุง `COPY` ุจุงุนุซ ุณุงุฎุชู ฺฉ ูุงู ุฌุฏุฏ ูโุดู.
- ููฺูู ูโุชูู ุฏุงุฎู ฺฉ container ุชุบุฑ ุจุฏ ู ุจุนุฏ ุจุง `โdocker container commitโโ` ุงูู ุชุบุฑุงุช ุฑู ุจู ุดฺฉู ฺฉ ูุงู ุฌุฏุฏ ุฐุฎุฑู ฺฉู.
- ููุช ุฏุงุฎู ฺฉ container ูุงู ุฑู ุชุบุฑ ุจุฏ ุง ุญุฐู ฺฉูุ ุงูู ุชุบุฑ ุชู **ุจุงูุงโุชุฑู** ูุงู ุซุจุช ูโุดู. Docker ุงุฒ ฺุฒ ุจูโุงุณู _union filesystem_ ุงุณุชูุงุฏู ูโฺฉูู ุชุง ุงู ูุงูโูุง ุฑู ุชุฑฺฉุจ ฺฉูู.
- ุงฺฏุฑ ูุงู ุชุบุฑ ฺฉููุ ูุนูููุงู ูุณุฎูโ ุฌุฏุฏุด ฺฉูพ ูโุดู ุชู ูุงู ุจุงูุง ู ุชุบุฑ ุฑู ุงูู ุงุนูุงู ูโุดู (ุงู ุฑู ูโฺฏู _copy-on-write_). ุงู ูโุชููู ุฑู performance ู ุญุฌู imag ุชุฃุซุฑ ุจุฐุงุฑู.
- ุงฺฏู ุชุบุฑ ุฏุฑ ูุงู ุง ุงุชูุงู ุจุงูุชู ูุงู ูุง ุจุนุฏ ูู ุงุฒ ฺฉุด ุงุณุชูุงุฏู ููฺฉูู ู ุฏูุจุงุฑู ุญุณุงุจ ูฺฉูู
- ูุฑ ุฏุณุชูุฑ ุฏุฑ Dockerfile (ูุซู COPY, RUN, ADD, โฆ) ุจู ููุฑุงู ุฏุงุฏูโูุง ฺฉู ุฑู ุงูู ุงุซุฑ ูโุฐุงุฑูุ ุชุจุฏู ุจู ฺฉ **ูุด** (hash) ูโุดู. ู ุงู ู ุฌุง ุฐุฎุฑู ูุดู ุฏุงฺฉุฑ ุงุฒ ุฑู ุงู ููููู ฺฉู ู ูุงู ุชุบุฑ ฺฉุฑุฏู ุง ูู

ุฏุงุฎู ฺฉุงูุชูุฑ ูุง ุณุงุฎุชุงุฑ ุงุฒููู ุง ุฏููุง ูุดุงุจู ุจุง ุณุงุฎุชุงุฑ ุณุณุชู ูุง unix ุณุงุฎุชู ูุดู ู ุงู ุจู ฺฉูฺฉ **mnt namespace** ุจุฑุง ุงุฌุงุฏ ุงุฒููุดู ูุณุชุด

### Storage and Volume

ูุฑ ุฏุงฺฉุฑ ูุงู ุฏุฑ ุฒูุงู ุงุฌุฑุง ฺฉ writeable layer ุฏุงุฑู ฺฉู ุฑู ููู ูุงู ูุง ูุณุช ุจุฑุง ููุดุชู ุชุบุฑุงุช ุฏุงุฎู ู ฺฉุงูุชูุฑ ู ููุช ฺฉุงูุชูุฑ ูุง ุจู ุฏูู ุฎุงุฑุฌ ูุดูุ ูุฑ ฺ ฺฉู ุฏุฑ ุงูุฌุง ููุดุชู ุดุฏู ุฏูุฑ ุฑุฎุชู ูุดู ุจู ููู ุฏูู ูุณุชุด ฺฉู ูุง ุจุฑุง ุฏุชุง ูุง ฺฉู ุทููุงู ูุฏุช ูุงุฒู ุฏุงุฑู ุจู volume ุงุญุชุงุฌ ุฏุงุฑู

Union filesystem ฺฉู ุฏุงฺฉุฑ ุงุฒุด ุงุณุชูุงุฏู ูโฺฉูู ุจุฑุง ุงุฌุฑุง ูููุช ุจุฑูุงููโูุง ุฎูุจูุ ฺูู ุงุฒ ฺูุฏ ูุงู ุณุงุฎุชู ุดุฏู ู ุชุบุฑุงุช ููุท ุฑู ูุงู ุจุงูุง ููุดุชู ูโุดู. ุงูุง ุจุฑุง ูฺฏูโุฏุงุฑ ุฏุงุฏูโูุง ุจููุฏูุฏุช ุง ุงุดุชุฑุงฺฉโฺฏุฐุงุฑ ุฏุงุฏู ุจู ฺฉุงูุชูุฑูุง ู ุณุณุชู ูุฒุจุงู ููุงุณุจ ูุณุชุ ฺูู ุงู ุชุบุฑุงุช ูุงูพุงุฏุงุฑู ู ุจุง ูพุงฺฉ ุดุฏู ฺฉุงูุชูุฑ ุงุฒ ุจู ูโุฑู.

ุฏุฑ ููุงุจูุ ูููฺฉุณ ุจุง ุงุณุชูุงุฏู ุงุฒ mount point ุจู ูุง ุงุฌุงุฒู ูโุฏู ูุณุฑูุง ุฏุฑ ูุงูโุณุณุชู ุฑู ุจู ุฏุณฺฉโูุง ูุงูุน ุง ูุฌุงุฒ ูุชุตู ฺฉูู. ุงู ุณุงุฎุชุงุฑ ุจุงุนุซ ูโุดู ุฏุงุฏูโูุง ูุณุชูู ุงุฒ ฺฉุงูุชูุฑ ุจุงู ุจูููู ู ุจุชููู ุงููโูุง ุฑู ุจู ฺฉุงูุชูุฑูุง ุง ุจุง ูุฒุจุงู ุจู ุงุดุชุฑุงฺฉ ุจุฐุงุฑู.

ูพุณ ุจุฑุง ฺฉุงุฑ ุจุง ุฏุงุฏูโูุง ููู ู ุฏุงุฆูุ ุจุงุฏ ุงุฒ mount point (ูุซู volumeูุง ุฏุฑ ุฏุงฺฉุฑ) ุงุณุชูุงุฏู ฺฉููุ ูู ุตุฑูุงู union filesystem.

ูุฑุถ ฺฉู ู ููุด USB ุฏุงุฑ ฺฉู ูโุฎูุง ุชู ูููฺฉุณ ุจูุด ุฏุณุชุฑุณ ุฏุงุดุชู ุจุงุด.

๐น ุจุฏูู ุงูฺฉู ุจุฏูู ุงุฒ ฺฉุฏูู ุฏุณฺฉ ุงุณุชูุงุฏู ูโฺฉู:

ููุช ููุด ุฑู ุจู ุณุณุชู ูุตู ูโฺฉูุ ูููฺฉุณ ุงูู ุฑู ุจู ู ูุณุฑ ูุซู /media/mahdi/usb-drive mount ูโฺฉูู.

ุงุฒ ุงูู ูุญุธู ุจู ุจุนุฏุ ุชู ููุท ุจุง ุงูู ูุณุฑ ฺฉุงุฑ ูโฺฉูุ ูุซูุง:

```bash
cd /media/mahdi/usb-drive
```

๐งฉ ุงุฑุชุจุงุทุด ุจุง ฺฉุงูุชูุฑ:

ููู ููููู ุชู ฺฉุงูุชูุฑ ูู ูุณุช. ูุซูุงู ุงฺฏู ุจุฎูุง ู ุฏุงุฑฺฉุชูุฑ ุงุฒ ุณุณุชู ูุฒุจุงู ุฑู ุฏุงุฎู ฺฉุงูุชูุฑ ุจุจุฑุ ุงูฺฏุงุฑ ุงูู USB ุฑู mount ฺฉุฑุฏ ุชู ฺฉุงูุชูุฑ. ุงุฒ ุฏุฏ ุจุฑูุงูู ุฏุงุฎู ฺฉุงูุชูุฑุ ุงูฺฏุงุฑ ุงูู ูุณุฑ ุจุฎุด ุงุฒ ูุงูโุณุณุชูุดูุ ูู ุฏุฑ ูุงูุน ุฏุงุฑู ุงุฒ ู ุฌุง ุฏฺฏู ูุงุฏ.

### Networking

ููุช ฺฉุงูุชูุฑูุง ุฑู ฺฉ ูุงุดู (ูุงุณุช) ุงุฌุฑุง ูุดูุ ุจุงุฏ ุจุชููู ุจุง ูู ู ุจุง ุฎุงุฑุฌ ูุงุณุช ุงุฑุชุจุงุท ุจุฑูุฑุงุฑ ฺฉูู. ุฏุงฺฉุฑ ุจุฑุง ุงู ุงุฑุชุจุงุทุ ฺฉ ูุงู ุงูุชุฒุงุน ุดุจฺฉู ูโุณุงุฒู ฺฉู ุจู ฺฉุงูุชูุฑูุง ุงูฺฉุงู ูโุฏู ุจุฏูู ูุงุจุณุชฺฏ ูุณุชูู ุจู ุดุจฺฉู ูุฒุจุงูุ ุจู ุตูุฑุช ุงุฒููู ูู ูุงุจู ุฏุณุชุฑุณ ฺฉุงุฑ ฺฉูู.

**ุงููุงุน ุดุจฺฉูโูุง ุฏุฑ ุฏุงฺฉุฑ:**

- **Bridge** (ูพุดโูุฑุถ):
  ฺฉุงูุชูุฑูุง ุขุฏุฑุณ _IP_ ุฎุตูุต ููุญุตุฑ ุจู ูุฑุฏ ูโฺฏุฑู ู ูโุชููู ุจุง ูู ุฑู ููู ุดุจฺฉู ุฏุงุฎู ุตุญุจุช ฺฉูู. ุฏุงฺฉุฑ ุจุง _NAT_ ุชุฑุงูฺฉ ุฎุฑูุฌ ุฑู ุจู ุจุฑูู ููุชูู ูโฺฉูู.
- **Host**:
  ฺฉุงูุชูุฑ ุดุจฺฉู ูุฒุจุงู ุฑู ูุณุชููุงู ุงุณุชูุงุฏู ูโฺฉููุ ุนู ูุซู ู ุจุฑูุงูู ุนุงุฏ ุฑู ุณุณุชู ุงุฌุฑุง ูโุดู ู ุชูุงู ุดุจฺฉู ูุฒุจุงู ุฑู ุฏุงุฑู. ุงู ุญุงูุช ุงุฒููู ูุณุช ู ฺฉูุชุฑ ุชูุตู ูโุดู.
- **None**:
  ฺฉุงูุชูุฑ ูฺ ุดุจฺฉูโุง ูุฏุงุฑูุ ููุท loopback ุฏุงุฎู ุฏุงุฑู. ุจุฑุง ุจุฑูุงููโูุง ฺฉู ุจู ุดุจฺฉู ูุงุฒ ูุฏุงุฑู ููุงุณุจ ุงุณุช.

ููุด **ูพูุฑุชโูุง**: ุจุฑุง ุฏุณุชุฑุณ ุจู ุจุฑูุงููโูุง ุฏุงุฎู ฺฉุงูุชูุฑ ุงุฒ ุฎุงุฑุฌุ ุจุงุฏ ูพูุฑุชโูุง ฺฉุงูุชูุฑ ุจู ูพูุฑุชโูุง ูุฒุจุงู ูุชุตู (publish) ุจุดู. ูุซูุงู -p 8080:80 ุนู ูพูุฑุช ธฐ ฺฉุงูุชูุฑ ุฑู ูพูุฑุช ธฐธฐ ูุฒุจุงู ูุฑุงุฑ ูโฺฏุฑู.

ููุช ฺฉ ฺฉุงูุชูุฑ ุงุฌุงุฏ ูโฺฉูุ ุฏุงฺฉุฑ ุจุฑุงุด ฺฉ **network namespace** ุฌุฏุงฺฏุงูู ูโุณุงุฒู. ุงู ุนู ฺฉุงูุชูุฑ:

- ฺฉุงุฑุช ุดุจฺฉู ุฎูุฏุด ุฑู ุฏุงุฑู (ูุซู eth0)
- ุฌุฏูู routing ุฎูุฏุด ุฑู ุฏุงุฑู
- ุขุฏุฑุณโูุง IP ุฎูุฏุด ุฑู ุฏุงุฑู
  ุจูุงุจุฑุงู ุงุฒ ุฏุฏ ุณุณุชูโุนุงููุ ฺฉุงูุชูุฑ ู ุณุณุชู ูุณุชูู ุจุง ุดุจฺฉู ูุฌุฒุงุณุช.

## ุจุฎุด ุฏูู: Packaging software for distribution

ุชุนู ฺฉุฑุฏู ูููุฑ ููุช ุจุฑุง ุงูู ฺฉู ฺฉ ฺฉุงูุชูุฑ ูุชููู ุงุฒ ุฑู ุงุณุชูุงุฏู ฺฉูู ฺฉู ุจุงุนุซ ูพุฏุฏู ฺฏุฑุณูฺฏ starvation ุจุดู. ูฺฉุชู ุงุด ุงูู ฺฉู ููุฏุงุฑ ฺฉู ุชุนู ูฺฉููุ ููุฏุงุฑ ุฑุฒุฑู ุดุฏู ูุณุช ุง ุญุช ุงูู ุชุถูู ููฺฉูู ุฏุฑ ุงูู ูุญุถู ุงูููุฏุฑ RAM ูุฌูุฏ ุฏุงุดุชู ุจุงุดู ููุท ูุฑุงุฑู ุฌูู **over consumpation** ุฑู ุจฺฏุฑู

ูู ุจุฑุง cpu ูุถู ฺฉู ูุชูุงูุช ูุณุชุด ุจู ุงู ุนูุช ฺฉู
ุจุฑุง cpu ูุง ูุฒู ุชุนู ูฺฉูู. ุจู ุตูุฑุช ูพุดูุฑุถ ููู ฺฉุงูุชูุฑูุง ฑฐฒด ูุณุชูู ฺฉู ุนู ุจุงุฑ ุจู ุทูุฑ ูุณุงู ุชูุณู ูุดู ุงฺฏู ูุง cpu ฺฉ ุฑู ุจุฒุงุฑู ฒฐดธ ูุฒู ุจุดุชุฑ ุฏุฑุงูุช ูฺฉูู

ูุงูุชูุฑูฺฏ ุงุณุชูุงุฏู ุงุฒ cpu ุชูุณุท ฺฉุงูุชุฑูุง ุจุฑุง ุงุทููุงู ุงูฺฉู cpu share ุจุฏุฑุณุช ฺฉุงุฑ ูฺฉูู ุถุฑูุฑ ูุณุชุด

---

-ุง Image ุดุงูู ฺูุฏู Layer ุงุณุช ฺฉู ุจู ุตูุฑุช stack ุฑู ูู ูุฑุงุฑ ุฏุงุฑูุฏ

- ูุฑ ุฏุณุชูุฑ ุฏุฑ Dockerfile ฺฉ ูุงู ุฌุฏุฏ ูโุณุงุฒู.
- ุงTag ุงุณู ูุงุจู ุฎูุงูุฏู ู ูุณุฎูโุง ุจุฑุง Image ูุณุช (ูุซุงู: nginx:latest).
- ุงLayers ุฌุฏุงฺฏุงูู ุฐุฎุฑู ูโุดู ู ููฺฏุงู ุชุบุฑ ููุท ูุงู ุฌุฏุฏ ุณุงุฎุชู ูโุดูุ ูู ฺฉู image.
- ูุฑ Image ูุญุฏูุฏุช ุฏุฑ ุชุนุฏุงุฏ Layer ุฏุงุฑู (ูุนูููุงู 127 ูุงู).
- ฺฉุงูุด ุชุนุฏุงุฏ Layer ุจุงุนุซ ุจูุจูุฏ performanceุ ุณุฑุนุช pull ู push ู ฺฉุงูุด ุงุณุชูุงุฏู ุงุฒ ูุถุง ูโุดู.
- ุฑูุดโูุง ฺฉุงูุด ุณุงุฒ ู ูุงู:
  ุงุฏุบุงู ฺูุฏ ุฏุณุชูุฑ RUN ุฏุฑ ฺฉ ุจููฺฉ (ูุซูุงู RUN apt-get update && apt-get install -y โฆ).
  ุญุฐู ูุงูโูุง ูููุช ู ฺฉุด ุฏุฑ ููุงู ูุงู ูุซูุงู ูพุงฺฉ ฺฉุฑุฏู apt cache ุจุนุฏ ูุตุจ.
  ุงุณุชูุงุฏู ุงุฒ Base Image ุณุจฺฉ ูุซู alpine ุจู ุฌุง ubuntu.
  ุญุฐู ูุงูโูุง ุง ูุงูโูุง ุบุฑุถุฑูุฑ ุงุฒ Image.

### ุง entry point ฺูุ

ูุนูููุง entry point ุจุฑุง startup ุงุณฺฉุฑูพุช ูุง ูุซูุง ูุซูุง seeder ุจุฑุง ุฏุชุงุจุณ ุงุณุชูุงุฏู ูุดู ูพุณ ูุฑูุด ุจุง cmd ฺูุ

- ุง**`ENTRYPOINT`**ยูุซูย**ูุฑูุงู ุงุตู**ยฺฉุงูุชูุฑู (ุซุงุจุชุ ูฺฏุฑ ุจุงย`--entrypoint`ยุนูุถุด ฺฉู).
- ุง**`CMD`**ยูุซูย**ูพุงุฑุงูุชุฑูุง ูพุดโูุฑุถ**ู (ุจุง ุขุฑฺฏููุงูโูุงย`docker run`ยูุดู ุนูุถุด ฺฉุฑุฏ).

```DockerFile
FROM alpine
ENTRYPOINT ["echo"]
CMD ["Hello friend"]
```

output -> Hello friend
ูู ุงฺฏู ุญุงูุง ุงุทูุฑ ุฑุงูุด ฺฉูู

```bash
docker run my-image "Hello Docker!"
```

output -> Hello Docker!

ุง**ARG ฺูุ**  
ูพุงุฑุงูุชุฑู ฺฉู ููุท ุฏุฑ ุฒูุงูย*ุณุงุฎุช ุงูุฌ*ย(ุฏูุฑุงูย`docker build`) ูุงุจู ุงุณุชูุงุฏู ุงุณุช ู ุจุนุฏ ุงุฒ ุณุงุฎุช ุงูุฌุ ุฏฺฏุฑ ุฏุฑ ุฏุณุชุฑุณ ูุณุช. ูู ENV ูู ุฒูุงู build ู ูู ุฏุฑ ุฒูุงู Run ุฏุฑ ุฏุณุชุฑุณู

```bash
docker build --build-arg APP_VERSION=2.0 .
```

### ูุฏุฑุช ูพุฑุงุณุณ ูุง ุฏุฑ ุฏุงฺฉุฑ

ุชู ุณุณุชู ุนุงูู ูุง ฺฉ systemd ุฏุงุฑู ฺฉู ุจู ุนููุงู <mark>PID</mark>1 ุงุฌุฑุง ูุดู ฺฉู ูุธูู ุงุด ูพุงฺฉ ฺฉุฑุฏู ูุฑุงูุฏ ูุง <mark>ุฒุงูุจ ูุณุชุด</mark> ูู ุชู ุฏุงฺฉุฑ ุงู ูพุฑุงุณุณ ฺฉู ุงูุงุฑู ูุฏุฑุช ฺฉูู ูุฏุงุฑู.
ฺุฒ ฺฉู ูุง ุชู entry point ูููุณู ุจู ุนููุงู PID 1 ุงุฌุฑุง ูุดู ูุง ูุชููู ุจุงู ฺฉ ูพุฑุงุณุณ ููุฌุฑ ูุตุจ ฺฉูู ฺฉู ฺฉุงุฑ ุจุฑุง ุฏุฑุณุช ฺฉูู.tini ฺฉ ูพุฑุงุณุณ ููุฌุฑ ุณุจฺฉู ฺฉู ูุชููู ุฏุงุดุชู ุจุงุดูุด

```javascript
RUN apt-get update && apt-get install -y tini
ENTRYPOINT ["tini", "--", "python", "app.py"]
```

ูู ุฎุจ ุฎูุจ ุงูู ฺฉู ูุงุฒู ูุณุช ุงู ฺฉุงุฑ ุฑู ุจฺฉูู ฺูู ุฏุงฺฉุฑ ูพุดูุฑุถ ุงูฺฉุงุฑู ุจุฑุง ูุง ฺฉุฑุฏู. ุญุงูุง ฺุฌูุฑ ุงู ูุดฺฉู ุฑู ุญู ฺฉุฑุฏู:

- **ูุดฺฉู:**ยููุช ุจู ฺฉุงูุชูุฑย`docker stop`ยุจุฒูุฏุ ุณฺฏูุงูย`SIGTERM`ยููุท ุจูย`PID 1`ยูุฑุณู. ุงฺฏุฑ process ุงุตู ุดูุง ุงู ุณฺฏูุงู ุฑุง ุจู ูุฑุฒูุฏูุงุด ููุชูู ูฺฉููุ ุจู ุฒูุฑ ฺฉู ูุดู (`SIGKILL`ยุจุนุฏ ุงุฒ ฑฐ ุซุงูู) ู grace full shut down ูุฏุงุฑู
- **ุฑุงูโุญู Tini:**

  - ุจู ุนููุงูย`PID 1`ยูุฑุงุฑ ูโฺฏุฑุฏ.
  - ุณฺฏูุงูโูุง ุฑุงย**ุจู ุฏุฑุณุช ุจู ุชูุงู ูุฑุขูุฏูุง ูุฑุฒูุฏ**ยููุชูู ูโฺฉูุฏ.

ูพุณ ุณู ุชุง ฺฉุงุฑ ูฺฉูู ุจุฑุงููู

1.  **ฺฏุฑุณููู**: ุงฺฏุฑ ูุฑุขูุฏ ุงุตู ุดูุง ุงู ุณฺฏูุงู ุฑุง ุจู ูุฑุฒูุฏูุงย**ููุชูู ูฺฉูุฏ**ุ ุขูโูุง ุจุนุฏ ุงุฒ ฑฐ ุซุงูู ุจุงย`SIGKILL`ยฺฉู ูโุดููุฏ (ุบุฑฺฏุฑุณููู)
2.  -**ูพุฑุฏุงุฑุด ุฒุงูุจ** ุญุงูุธู ุงุดุบุงู ููฺฉููุ ุงูุงย**ุงุณูุงุช Process ID**ยุณุณุชู ุฑู ูพุฑ ูฺฉูู. ุฏุฑ ฺฉุงูุชูุฑูุง ุทููุงูโูุฏุช ููฺฉูู ุจูย**ุญุฏุงฺฉุซุฑ ุชุนุฏุงุฏ ูุฑุขูุฏ (`pid_max`)**ยุจุฑุณู
3.  **ุณฺฏูุงูโ** ูุซู: ฺฉูุง ูุฑ ุณฺฏูุงู ุฏฺฏู ุง ูุซู SIGHUP ู ... ุจู child process ูุง ููุฑุณู ุงฺฏู ุจุฑูุงูููู ุงูุงุฑู ูพุฑุฏุงุฒุด ูฺฉูู ููฺฉูู ุฏุฑุณุช ฺฉุงุฑ ูฺฉูู

ุญุงูุง ู ุงุจุฒุงุฑ ุฏฺฏู ูู ูุณุช ุจู ุงุณู supervisord ฺฉู ุจุฑุง ฺฉุงุฑุจุฑุฏ ูุง ูพฺุฏู ุชุฑู:
ููุช ุชู ู ฺฉุงูุชูุฑ ููุฒูุงูย**ฺูุฏุชุง ุจุฑูุงูู**ยูุฎูุง ุงุฌุฑุง ฺฉู (ูุซูุงู ูู ูุจุณุฑูุฑุ ูู ุฏุชุงุจุณุ ูู ู ุงุณฺฉุฑูพุช ูพุงุชูู)ุ ุณููพุฑูุงุฒุฑ ูุงุฏ ูููุดูู ุฑูย**ฺฉูุชุฑู ูฺฉูู**. ุงฺฏู ู ุจุฑูุงูู ุจูุชูุ ุฎูุฏฺฉุงุฑ ุฏูุจุงุฑู ุฑูุดูุด ูฺฉูู ู ูุงฺฏ ูููฺ ุฑู ูู ูุฌุง ุฌูุน ูุฒูู.

**ุงูุง ู ูฺฉุชู:**ยุงุตู ุฏุงฺฉุฑ ุงูู ฺฉู ูุฑ ุจุฑูุงูู ุชู ู ฺฉุงูุชูุฑ ุฌุฏุง ุงุฌุฑุง ุจุดู. ูพุณ ุณููพุฑูุงุฒุฑ ุจุดุชุฑ ุจุฑุง ููุงูุนู ฺฉูย**ูุฌุจูุฑ**ยฺูุฏุชุง ุณุฑูุณ ุฑู ุชู ู ุฌุง ุฌูุน ฺฉู (ูุซูุงู ุจุฑูุงููโูุง ูุฏู ฺฉู ููุดู ุชุบุฑุดูู ุฏุงุฏ). ุฏุฑ ุญุงูุช ุนุงุฏุ ุจูุชุฑู ุงุฒย**Docker Compose**ยุงุณุชูุงุฏู ฺฉูู ุชุง ูุฑ ุณุฑูุณ ุชู ฺฉุงูุชูุฑ ุฎูุฏุด ุจุงุดู.
